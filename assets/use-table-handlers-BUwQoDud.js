import{G as X,aP as ae,J as V,aq as se,K as j,bv as te,k as P,bw as ne,o as F,c as _,b as N,a4 as B,Q as k,e,t as re,d as z,w,n as K,aN as ie,Z as ue,s as q,R as Q,S as Y,bx as de,by as ce,H as G,a6 as W,aD as fe,bz as ve,aX as H,r as y,bA as ye,bB as ge,bu as be,bC as me,m as J,bD as pe,N as Ce,X as he,T as Ee,bE as Z,b5 as ke,aa as we,aV as De,M as Ie,a3 as Te,bF as Be,ad as Pe,bG as Se,bH as Ae,bI as Fe,ax as Re,ae as $e,bJ as Le,bK as Oe,af as Me,u as Ne,x as ze}from"./index-D7YHtZON.js";const x=Symbol("dialogInjectionKey"),ee=X({center:Boolean,alignCenter:Boolean,closeIcon:{type:ae},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ve={close:()=>!0},_e=V({name:"ElDialogContent"}),Ke=V({..._e,props:ee,emits:Ve,setup(o,{expose:i}){const t=o,{t:E}=se(),{Close:s}=de,{dialogRef:d,headerRef:c,bodyId:b,ns:n,style:r}=j(x),{focusTrapRef:m}=j(te),p=P(()=>[n.b(),n.is("fullscreen",t.fullscreen),n.is("draggable",t.draggable),n.is("align-center",t.alignCenter),{[n.m("center")]:t.center}]),C=ce(m,d),f=P(()=>t.draggable),g=P(()=>t.overflow),{resetPosition:D}=ne(d,c,f,g);return i({resetPosition:D}),(l,u)=>(F(),_("div",{ref:e(C),class:k(e(p)),style:Q(e(r)),tabindex:"-1"},[N("header",{ref_key:"headerRef",ref:c,class:k([e(n).e("header"),{"show-close":l.showClose}])},[B(l.$slots,"header",{},()=>[N("span",{role:"heading","aria-level":l.ariaLevel,class:k(e(n).e("title"))},re(l.title),11,["aria-level"])]),l.showClose?(F(),_("button",{key:0,"aria-label":e(E)("el.dialog.close"),class:k(e(n).e("headerbtn")),type:"button",onClick:h=>l.$emit("close")},[z(e(ue),{class:k(e(n).e("close"))},{default:w(()=>[(F(),K(ie(l.closeIcon||e(s))))]),_:1},8,["class"])],10,["aria-label","onClick"])):q("v-if",!0)],2),N("div",{id:e(b),class:k(e(n).e("body"))},[B(l.$slots,"default")],10,["id"]),l.$slots.footer?(F(),_("footer",{key:0,class:k(e(n).e("footer"))},[B(l.$slots,"footer")],2)):q("v-if",!0)],6))}});var qe=Y(Ke,[["__file","dialog-content.vue"]]);const Ue=X({...ee,appendToBody:Boolean,appendTo:{type:G([String,Object]),default:"body"},beforeClose:{type:G(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),je={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[W]:o=>fe(o),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ge=(o,i)=>{var t;const s=Ee().emit,{nextZIndex:d}=ve();let c="";const b=H(),n=H(),r=y(!1),m=y(!1),p=y(!1),C=y((t=o.zIndex)!=null?t:d());let f,g;const D=ye("namespace",ge),l=P(()=>{const v={},T=`--${D.value}-dialog`;return o.fullscreen||(o.top&&(v[`${T}-margin-top`]=o.top),o.width&&(v[`${T}-width`]=be(o.width))),v}),u=P(()=>o.alignCenter?{display:"flex"}:{});function h(){s("opened")}function I(){s("closed"),s(W,!1),o.destroyOnClose&&(p.value=!1)}function S(){s("close")}function A(){g==null||g(),f==null||f(),o.openDelay&&o.openDelay>0?{stop:f}=Z(()=>O(),o.openDelay):O()}function R(){f==null||f(),g==null||g(),o.closeDelay&&o.closeDelay>0?{stop:g}=Z(()=>M(),o.closeDelay):M()}function $(){function v(T){T||(m.value=!0,r.value=!1)}o.beforeClose?o.beforeClose(v):R()}function L(){o.closeOnClickModal&&$()}function O(){ke&&(r.value=!0)}function M(){r.value=!1}function a(){s("openAutoFocus")}function U(){s("closeAutoFocus")}function oe(v){var T;((T=v.detail)==null?void 0:T.focusReason)==="pointer"&&v.preventDefault()}o.lockScroll&&me(r);function le(){o.closeOnPressEscape&&$()}return J(()=>o.modelValue,v=>{v?(m.value=!1,A(),p.value=!0,C.value=pe(o.zIndex)?d():C.value++,Ce(()=>{s("open"),i.value&&(i.value.scrollTop=0)})):r.value&&R()}),J(()=>o.fullscreen,v=>{i.value&&(v?(c=i.value.style.transform,i.value.style.transform=""):i.value.style.transform=c)}),he(()=>{o.modelValue&&(r.value=!0,p.value=!0,A())}),{afterEnter:h,afterLeave:I,beforeLeave:S,handleClose:$,onModalClick:L,close:R,doClose:M,onOpenAutoFocus:a,onCloseAutoFocus:U,onCloseRequested:le,onFocusoutPrevented:oe,titleId:b,bodyId:n,closed:m,style:l,overlayDialogStyle:u,rendered:p,visible:r,zIndex:C}},He=V({name:"ElDialog",inheritAttrs:!1}),Je=V({...He,props:Ue,emits:je,setup(o,{expose:i}){const t=o,E=we();De({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},P(()=>!!E.title));const s=Ie("dialog"),d=y(),c=y(),b=y(),{visible:n,titleId:r,bodyId:m,style:p,overlayDialogStyle:C,rendered:f,zIndex:g,afterEnter:D,afterLeave:l,beforeLeave:u,handleClose:h,onModalClick:I,onOpenAutoFocus:S,onCloseAutoFocus:A,onCloseRequested:R,onFocusoutPrevented:$}=Ge(t,d);Te(x,{dialogRef:d,headerRef:c,bodyId:m,ns:s,rendered:f,style:p});const L=Oe(I),O=P(()=>t.draggable&&!t.fullscreen);return i({visible:n,dialogContentRef:b,resetPosition:()=>{var a;(a=b.value)==null||a.resetPosition()}}),(a,U)=>(F(),K(e(Le),{to:a.appendTo,disabled:a.appendTo!=="body"?!1:!a.appendToBody},{default:w(()=>[z(Be,{name:"dialog-fade",onAfterEnter:e(D),onAfterLeave:e(l),onBeforeLeave:e(u),persisted:""},{default:w(()=>[Pe(z(e(Se),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":e(g)},{default:w(()=>[N("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:e(r),"aria-describedby":e(m),class:k(`${e(s).namespace.value}-overlay-dialog`),style:Q(e(C)),onClick:e(L).onClick,onMousedown:e(L).onMousedown,onMouseup:e(L).onMouseup},[z(e(Ae),{loop:"",trapped:e(n),"focus-start-el":"container",onFocusAfterTrapped:e(S),onFocusAfterReleased:e(A),onFocusoutPrevented:e($),onReleaseRequested:e(R)},{default:w(()=>[e(f)?(F(),K(qe,Fe({key:0,ref_key:"dialogContentRef",ref:b},a.$attrs,{center:a.center,"align-center":a.alignCenter,"close-icon":a.closeIcon,draggable:e(O),overflow:a.overflow,fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,"aria-level":a.headerAriaLevel,onClose:e(h)}),Re({header:w(()=>[a.$slots.title?B(a.$slots,"title",{key:1}):B(a.$slots,"header",{key:0,close:e(h),titleId:e(r),titleClass:e(s).e("title")})]),default:w(()=>[B(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:w(()=>[B(a.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):q("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[$e,e(n)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Ze=Y(Je,[["__file","dialog.vue"]]);const Qe=Me(Ze);function Ye(o){const{t:i}=Ne(),t=y(),E=y(!1),s=y(!1),d=y(!1),c=y(),b={...o},n=()=>{t.value.reload()},r=()=>{E.value=!0,s.value=!1,c.value&&c.value.clearValidate()},m=l=>{if(o){s.value=!0,E.value=!0;for(const u in o)u in l&&(o[u]=l[u])}},p=(l,u,h)=>{l({id:u}).then(()=>{h&&h()}),t.value.refresh()};function C(){E.value=!1,g()}const f=(l,u)=>{!o||!l||c.value.validate(h=>{if(h){d.value=!0;let I;const S=l.getParams?l.getParams():D();s.value?I=l.update(S):I=l.save(S),I.then(A=>{u?u(A):ze({message:i("tips.success"),type:"success",showClose:!0}),C(),s.value?t.value.refresh():t.value.reload()}).finally(()=>{d.value=!1})}})},g=()=>{if(o)for(const l in b)o[l]=b[l]},D=()=>{const l={...o};return s.value||delete l.id,l};return{t:i,tableRef:t,dialogVisible:E,isEdit:s,formLoading:d,formRef:c,doSearch:n,doAdd:r,doEdit:m,doSubmit:f,doClose:C,doRemove:p}}export{Qe as E,Ye as u};
